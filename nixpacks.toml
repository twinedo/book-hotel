[phases.setup]
nixpkgsArchive = "master"
packages = ["unzip", "bun"]  # unzip must come first!

[phases.build]
commands = [
  "cd apps/backend && bun install --production --frozen-lockfile",
  "cd apps/backend && bun build --compile --minify --target bun --outfile server ./src/index.ts"
]

[phases.start]
command = "./apps/backend/server"